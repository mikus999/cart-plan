(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{142:function(t,e,a){"use strict";a.r(e);var n=a(1),o=a.n(n),r=a(6),c=a.n(r),i=(a(71),a(17)),s=a(27);function l(t,e,a,n,o,r,c){try{var i=t[r](c),s=i.value}catch(t){return void a(t)}i.done?e(s):Promise.resolve(s).then(n,o)}function u(t){return function(){var e=this,a=arguments;return new Promise((function(n,o){var r=t.apply(e,a);function c(t){l(r,n,o,c,i,"next",t)}function i(t){l(r,n,o,c,i,"throw",t)}c(void 0)}))}}var d={middleware:["auth","teams"],layout:"vuetify",mixins:[i.a],validations:{tempData:{name:{required:s.required}}},data:function(){return{dialog:!1,isEdit:!1,headers:[{text:this.$t("teams.location_name"),align:"start",value:"name"},{text:this.$t("teams.location_color"),value:"color_code",align:"center",sortable:!1},{text:this.$t("teams.location_map"),value:"map",sortable:!1},{text:this.$t("general.default"),value:"default",align:"center",sortable:!1},{text:this.$t("general.actions"),value:"actions",sortable:!1}],defaultData:{id:null,team_id:null,name:"",color_code:"#000000",map:null,default:!1},tempData:{name:null},locationData:[],menu:!1}},computed:{swatchStyle:function(){this.color;var t=this.menu;return{backgroundColor:this.tempData.color_code,cursor:"pointer",height:"20px",width:"20px",borderRadius:t?"50%":"4px",transition:"border-radius 200ms ease-in-out"}},nameErrors:function(){var t=[];return this.$v.tempData.name.$dirty?(!this.$v.tempData.name.required&&t.push(this.$t("teams.location_name_required")),t):t}},created:function(){this.getData()},methods:{getData:function(){var t=this;return u(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.get("/api/teams/"+t.team.id+"/locations/").then((function(e){t.locationData=e.data}));case 2:case"end":return e.stop()}}),e)})))()},deleteLoc:function(t){var e=this;return u(o.a.mark((function a(){var n;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.locationData.indexOf(t.id),a.next=3,e.$root.$confirm(e.$t("teams.confirm_location_delete"),null,"error");case 3:if(!a.sent){a.next=6;break}return a.next=6,c.a.delete("/api/teams/"+e.team.id+"/locations/"+t.id).then((function(t){e.locationData.splice(n,1),e.showSnackbar(e.$t("teams.success_location_delete"),"success")}));case 6:case"end":return a.stop()}}),a)})))()},close:function(){this.dialog=!1},showDialog:function(t,e){e?this.tempData=this.lodash.cloneDeep(t):(this.tempData=this.lodash.cloneDeep(this.defaultData),this.tempData.team_id=this.team.id),this.isEdit=e,this.dialog=!0},createOrUpdate:function(){var t=this;return u(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$v.$touch(),t.$v.$invalid){e.next=6;break}return t.isEdit?(a="patch",n="/api/teams/"+t.team.id+"/locations/"+t.tempData.id):(a="post",n="/api/teams/"+t.team.id+"/locations/"),e.next=5,c()({method:a,url:n,data:t.tempData}).then((function(e){t.getData(),t.showSnackbar(t.$t("teams.success_location_update"),"success")}));case 5:t.close();case 6:case"end":return e.stop()}}),e)})))()},updateDefault:function(t){var e=this;return u(o.a.mark((function a(){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c()({method:"post",url:"/api/teams/"+e.team.id+"/locations/"+t+"/makedefault",data:e.tempData}).then((function(t){e.getData(),e.showSnackbar(e.$t("teams.success_location_default"),"success")}));case 2:case"end":return a.stop()}}),a)})))()}}},m=a(5),v=a(13),p=a.n(v),f=a(87),_=a(157),h=a(10),x=a(155),D=a(613),b=a(630),k=a(612),$=a(629),g=a(75),w=a(160),y=a(599),V=a(626),C=a(68),S=a(37),T=a(24),E=Object(m.a)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("PageTitle",{attrs:{title:t.$tc("teams.cart_location",1)}})],1),t._v(" "),a("v-card",{attrs:{width:"100%"}},[a("v-data-table",{attrs:{headers:t.headers,items:t.locationData,"sort-by":"default, name","sort-desc":""},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",{directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.smAndUp,expression:"$vuetify.breakpoint.smAndUp"}]},[t._v(t._s(t.$tc("teams.cart_location",1)))]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"mb-2",attrs:{color:"secondary",block:t.$vuetify.breakpoint.xs},on:{click:function(e){return t.showDialog(t.tempData,!1)}}},[t._v(t._s(t.$t("teams.create_new_location")))]),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-center"},[a("span",{staticClass:"headline"},[t._v(t._s(t.$tc("teams.cart_location",0)))])]),t._v(" "),a("v-card-text",[a("v-container",[a("v-text-field",{attrs:{"prepend-icon":"mdi-form-textbox",label:t.$t("teams.location_name"),"error-messages":t.nameErrors},on:{blur:function(e){return t.$v.tempData.name.$touch()}},model:{value:t.tempData.name,callback:function(e){t.$set(t.tempData,"name",e)},expression:"tempData.name"}}),t._v(" "),a("v-menu",{attrs:{top:"","nudge-bottom":"105","nudge-left":"16","open-on-click":!0,"close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-text-field",t._g({attrs:{label:t.$t("teams.location_color_optional"),"prepend-icon":"mdi-palette","hide-details":""},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[a("v-icon",{attrs:{color:t.tempData.color_code}},[t._v("mdi-square-rounded")])]},proxy:!0}],null,!0),model:{value:t.tempData.color_code,callback:function(e){t.$set(t.tempData,"color_code",e)},expression:"tempData.color_code"}},n))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),a("v-card",[a("v-card-text",{staticClass:"pa-0"},[a("v-color-picker",{attrs:{mode:"hexa",flat:""},model:{value:t.tempData.color_code,callback:function(e){t.$set(t.tempData,"color_code",e)},expression:"tempData.color_code"}})],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{text:""},on:{click:function(e){t.menu=!1}}},[t._v(t._s(t.$t("general.ok")))])],1)],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"grey",text:""},on:{click:t.close}},[t._v(t._s(t.$t("general.cancel")))]),t._v(" "),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.createOrUpdate}},[t._v("\n                  "+t._s(t.isEdit?t.$t("general.save"):t.$t("general.create"))+"\n                ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.color_code",fn:function(e){var n=e.item;return[a("v-chip",{attrs:{color:n.color_code,small:""}},[t._v(t._s(n.color_code))])]}},{key:"item.default",fn:function(e){var n=e.item;return[n.default?a("v-icon",{attrs:{color:"green"}},[t._v("mdi-check-circle")]):a("v-icon",{on:{click:function(e){return e.preventDefault(),t.updateDefault(n.id)}}},[t._v("mdi-circle-outline")])]}},{key:"item.actions",fn:function(e){var n=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.showDialog(n,!0)}}},[t._v("\n          mdi-pencil\n        ")]),t._v(" "),a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.deleteLoc(n)}}},[t._v("\n          mdi-delete\n        ")])]}}])})],1)],1)}),[],!1,null,null,null);e.default=E.exports;p()(E,{VBtn:f.a,VCard:_.a,VCardActions:h.a,VCardText:h.c,VCardTitle:h.d,VChip:x.a,VColorPicker:D.a,VContainer:b.a,VDataTable:k.a,VDialog:$.a,VIcon:g.a,VMenu:w.a,VRow:y.a,VSpacer:V.a,VTextField:C.a,VToolbar:S.a,VToolbarTitle:T.a})}}]);