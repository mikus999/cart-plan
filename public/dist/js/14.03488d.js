(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{105:function(t,e,n){"use strict";var a=n(1),i=n.n(a),s=n(6),r=n.n(s);function o(t,e,n,a,i,s,r){try{var o=t[s](r),l=o.value}catch(t){return void n(t)}o.done?e(l):Promise.resolve(l).then(a,i)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(a,i){var s=t.apply(e,n);function r(t){o(s,a,i,r,l,"next",t)}function l(t){o(s,a,i,r,l,"throw",t)}r(void 0)}))}}var u={name:"ShiftCard",mixins:[n(17).a],props:{shift:{type:Object},schedule:{type:Object},background:{type:String,default:""},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:"170px"},onlyinfo:{type:Boolean,default:!1}},data:function(){return{request:!1,trade:!1}},created:function(){this.request=this.isShiftMember,this.trade=4==this.myShiftStatus},computed:{isShiftMember:function(){return this.shift.users.map((function(t){return t.id})).indexOf(this.user.id)>-1},hasRequestedTrade:function(){return 4==this.myShiftStatus},myShiftStatus:function(){var t=this,e=null,n=this.shift.users.filter((function(e){return e.id===t.user.id}));return n.length>0&&(e=n[0].pivot.status),e},shiftFull:function(){var t=!1;1==this.team.setting_shift_request_autoapproval&&(t=this.shift.users.length>=this.shift.max_participants);return t}},methods:{showButton:function(t){var e=!1;switch(t){case"request":e=1==this.schedule.status&&(!this.shiftFull||this.request)||2==this.schedule.status&&(0==this.myShiftStatus||1==this.myShiftStatus);break;case"trade":e=2==this.schedule.status&&this.myShiftStatus>1}return e},dayOfWeek:function(t){var e=[];return(e=this.$dayjs().localeData().weekdaysShort())[7]=e[0],e[t]},updateShiftUser:function(){var t=this;return l(i.a.mark((function e(){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=1==t.team.setting_shift_request_autoapproval?2:1,a=null,t.request=!t.request,a=t.request?"/api/schedules/joinshift":"/api/schedules/leaveshift",e.next=6,r()({method:"post",url:a,data:{user_id:t.user.id,shift_id:t.shift.id,status:n}}).then((function(e){t.shift.users=e.data.shiftusers}));case 6:case"end":return e.stop()}}),e)})))()},updateTrade:function(){var t=this;return l(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,t.trade=!t.trade,n=t.trade?4:2,e.next=5,r()({method:"post",url:"/api/schedules/shiftuserstatus",data:{user_id:t.user.id,shift_id:t.shift.id,status:n}}).then((function(e){t.shift.users=e.data.shiftusers}));case 5:case"end":return e.stop()}}),e)})))()},returnZero:function(t){return t<0?0:t}}},d=(n(356),n(5)),c=n(13),h=n.n(c),f=n(87),v=n(157),p=n(10),g=n(598),b=n(150),m=n(75),_=n(599),y=Object(d.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{style:"background-color: "+t.background,attrs:{outlined:"",hover:"",width:t.width}},[n("v-card-title",{staticClass:"justify-center text-h6",style:"background-color: "+(null!==t.shift.location.color_code?t.shift.location.color_code:"")},[t._v("\n    "+t._s(t.shift.location.name)+"\n  ")]),t._v(" "),n("v-card-subtitle",{staticClass:"text-center",style:"background-color: "+(null!==t.shift.location.color_code?t.shift.location.color_code:"")},[t._v("\n    "+t._s(t.dayOfWeek(t.$dayjs(t.shift.time_start).isoWeekday()))+"\n    "+t._s(t._f("formatTime")(t.shift.time_start))+" - "+t._s(t._f("formatTime")(t.shift.time_end))+"\n  ")]),t._v(" "),n("v-card-text",{style:"overflow-y: auto; height: "+t.height},[t._l(t.shift.users,(function(e){return n("div",{key:e.id,staticClass:"ma-2",attrs:{title:t.shiftStatus[e.pivot.status].text,disabled:""}},[n("v-icon",{staticClass:"ml-n4 mr-2",attrs:{color:t.shiftStatus[e.pivot.status].color}},[t._v(t._s(t.shiftStatus[e.pivot.status].icon))]),t._v(" "),n("span",{class:t.shiftStatus[e.pivot.status].color+"--text"},[t._v(t._s(e.name))])],1)})),t._v(" "),t._l(t.returnZero(t.shift.max_participants-t.shift.users.length),(function(e){return n("div",{key:e,staticClass:"ma-2",attrs:{disabled:""}},[n("div",{staticClass:"ml-n5 dashed-border rounded",attrs:{width:"100%"}},[n("v-icon",{staticClass:"ml-1 mr-2",attrs:{color:"grey"}},[t._v("mdi-account-outline")]),t._v(" "),n("span",[t._v(t._s(t.$t("general.available")))])],1)])}))],2),t._v(" "),n("v-divider",{staticClass:"ma-0"}),t._v(" "),t.onlyinfo?t._e():n("v-card-actions",[n("v-row",{attrs:{dense:""}},[n("v-col",{staticClass:"text-center"},[n("v-btn",{staticClass:"me-2",attrs:{disabled:!t.showButton("request"),color:(t.request&&t.myShiftStatus,""),icon:""},on:{click:function(e){return e.stopPropagation(),t.updateShiftUser(e)}}},[n("v-icon",[t._v(t._s(t.request?"mdi-account-minus":"mdi-account-plus"))])],1)],1),t._v(" "),n("v-col",{staticClass:"text-center"},[n("v-btn",{attrs:{disabled:!t.showButton("trade"),color:t.trade?"blue":"",icon:""},on:{click:function(e){return e.stopPropagation(),t.updateTrade(e)}}},[n("v-icon",[t._v("mdi-account-convert")])],1)],1)],1)],1)],1)}),[],!1,null,"0cff391d",null);e.a=y.exports;h()(y,{VBtn:f.a,VCard:v.a,VCardActions:p.a,VCardSubtitle:p.b,VCardText:p.c,VCardTitle:p.d,VCol:g.a,VDivider:b.a,VIcon:m.a,VRow:_.a})},131:function(t,e,n){"use strict";n.r(e);var a=n(6),i=n.n(a),s=n(17),r=n(1),o=n.n(r),l=n(105);function u(t,e,n,a,i,s,r){try{var o=t[s](r),l=o.value}catch(t){return void n(t)}o.done?e(l):Promise.resolve(l).then(a,i)}function d(t){return function(){var e=this,n=arguments;return new Promise((function(a,i){var s=t.apply(e,n);function r(t){u(s,a,i,r,o,"next",t)}function o(t){u(s,a,i,r,o,"throw",t)}r(void 0)}))}}var c={middleware:["auth","teams"],layout:"vuetify",mixins:[s.a],components:{ShiftCard:l.a},data:function(){return{tab:null,shifts:null,schedules:null,schedule:null,hover:!1}},computed:{cardWidth:function(){var t=null;switch(this.$vuetify.breakpoint.name){case"xs":t="100%";break;case"sm":t="29%";break;case"md":t="22%";break;case"xl":t="16%";break;default:t="22%"}return t}},created:function(){this.getSchedData()},methods:{getSchedData:function(){var t=this;return d(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/api/schedules/"+t.team.id).then((function(e){t.schedules=e.data,t.schedules=t.schedules.filter((function(t){return["1","2"].indexOf(t.status)>-1})),void 0!==t.schedules[0]&&(t.schedule=t.schedules[0],t.getShiftData())}));case 2:case"end":return e.stop()}}),e)})))()},getShiftData:function(){var t=this;return d(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/api/schedules/"+t.schedule.id+"/shifts").then((function(e){t.tab=0,t.shifts=e.data}));case 2:case"end":return e.stop()}}),e)})))()},dayOfWeek:function(t){var e=[];return(e=this.$dayjs().localeData().weekdaysShort())[7]=e[0],e[t]},filterShifts:function(t,e){var n=this,a=null;return null!==t&&(a=t.filter((function(t){return n.$dayjs(t.time_start).day()==e}))),a}}},h=n(5),f=n(13),v=n.n(f),p=(n(403),n(75)),g=n(14),b=n(9),m=n(25),_=n(4),y=n.n(_).a.extend({name:"transitionable",props:{mode:String,origin:String,transition:String}}),x=n(42),w=n(3),S=n(0),k=Object(w.a)(g.a,Object(x.b)(["left","bottom"]),b.a,m.a,y).extend({name:"v-badge",props:{avatar:Boolean,bordered:Boolean,color:{type:String,default:"primary"},content:{required:!1},dot:Boolean,label:{type:String,default:"$vuetify.badge"},icon:String,inline:Boolean,offsetX:[Number,String],offsetY:[Number,String],overlap:Boolean,tile:Boolean,transition:{type:String,default:"scale-rotate-transition"},value:{default:!0}},computed:{classes(){return{"v-badge--avatar":this.avatar,"v-badge--bordered":this.bordered,"v-badge--bottom":this.bottom,"v-badge--dot":this.dot,"v-badge--icon":null!=this.icon,"v-badge--inline":this.inline,"v-badge--left":this.left,"v-badge--overlap":this.overlap,"v-badge--tile":this.tile,...this.themeClasses}},computedBottom(){return this.bottom?"auto":this.computedYOffset},computedLeft(){return this.isRtl?this.left?this.computedXOffset:"auto":this.left?"auto":this.computedXOffset},computedRight(){return this.isRtl?this.left?"auto":this.computedXOffset:this.left?this.computedXOffset:"auto"},computedTop(){return this.bottom?this.computedYOffset:"auto"},computedXOffset(){return this.calcPosition(this.offsetX)},computedYOffset(){return this.calcPosition(this.offsetY)},isRtl(){return this.$vuetify.rtl},offset(){return this.overlap?this.dot?8:12:this.dot?2:4},styles(){return this.inline?{}:{bottom:this.computedBottom,left:this.computedLeft,right:this.computedRight,top:this.computedTop}}},methods:{calcPosition(t){return`calc(100% - ${Object(S.g)(t||this.offset)})`},genBadge(){const t=this.$vuetify.lang,e=this.$attrs["aria-label"]||t.t(this.label),n=this.setBackgroundColor(this.color,{staticClass:"v-badge__badge",style:this.styles,attrs:{"aria-atomic":this.$attrs["aria-atomic"]||"true","aria-label":e,"aria-live":this.$attrs["aria-live"]||"polite",title:this.$attrs.title,role:this.$attrs.role||"status"},directives:[{name:"show",value:this.isActive}]}),a=this.$createElement("span",n,[this.genBadgeContent()]);return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[a]):a},genBadgeContent(){if(this.dot)return;const t=Object(S.s)(this,"badge");return t||(this.content?String(this.content):this.icon?this.$createElement(p.a,this.icon):void 0)},genBadgeWrapper(){return this.$createElement("span",{staticClass:"v-badge__wrapper"},[this.genBadge()])}},render(t){const e=[this.genBadgeWrapper()],n=[Object(S.s)(this)],{"aria-atomic":a,"aria-label":i,"aria-live":s,role:r,title:o,...l}=this.$attrs;return this.inline&&this.left?n.unshift(e):n.push(e),t("span",{staticClass:"v-badge",attrs:l,class:this.classes},n)}}),C=n(157),j=n(599),O=n(109),$=n(607),B=n(616),V=n(614),T=n(169),q=n(37),F=Object(h.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{attrs:{width:"100%"}},[n("v-toolbar",{attrs:{flat:"",extended:"",height:"80"},scopedSlots:t._u([{key:"extension",fn:function(){return[null!==t.schedule?n("v-tabs",{attrs:{centered:"","align-with-title":"","fixed-tabs":"","show-arrows":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(7,(function(e){return n("v-tab",{key:e},[n("v-badge",{attrs:{color:"secondary",value:t.filterShifts(t.shifts,e)?t.filterShifts(t.shifts,e).length:null,content:t.filterShifts(t.shifts,e)?t.filterShifts(t.shifts,e).length:null,"offset-x":"-3px"}},[t._v("\n            "+t._s(t.dayOfWeek(e))+"\n          ")])],1)})),1):t._e()]},proxy:!0}])},[n("v-select",{staticClass:"mt-10",attrs:{outlined:"",items:t.schedules,"item-value":"id","item-text":"date_start","return-object":"","prepend-icon":"mdi-calendar-week-begin",label:t.$t("schedules.week_of")},on:{change:t.getShiftData},model:{value:t.schedule,callback:function(e){t.schedule=e},expression:"schedule"}})],1),t._v(" "),n("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(7,(function(e){return n("v-tab-item",{key:e},[n("v-row",{staticClass:"ma-2"},t._l(t.filterShifts(t.shifts,e),(function(e){return n("ShiftCard",{key:e.id,staticClass:"ma-3",attrs:{shift:e,schedule:t.schedule,width:t.cardWidth}})})),1)],1)})),1)],1)}),[],!1,null,null,null),E=F.exports;v()(F,{VBadge:k,VCard:C.a,VRow:j.a,VSelect:O.a,VTab:$.a,VTabItem:B.a,VTabs:V.a,VTabsItems:T.a,VToolbar:q.a});var P={middleware:["auth","teams"],layout:"vuetify",mixins:[s.a],components:{ShiftSchedule:E},data:function(){return{}},created:function(){},methods:{}},R=n(630),W=Object(h.a)(P,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-container",{attrs:{fluid:""}},[e("v-row",[e("PageTitle",{attrs:{title:this.$t("general.home")}})],1),this._v(" "),e("v-row",[e("ShiftSchedule")],1)],1)}),[],!1,null,null,null);e.default=W.exports;v()(W,{VContainer:R.a,VRow:j.a})},18:function(t,e,n){"use strict";var a=n(87);e.a=a.a},356:function(t,e,n){"use strict";var a=n(95);n.n(a).a},357:function(t,e,n){(t.exports=n(7)(!1)).push([t.i,"\n.dashed-border[data-v-0cff391d] \n{\n  border-style: dashed;\n  border-color: 'grey';\n  border-width: thin;\n}\n",""])},403:function(t,e,n){var a=n(404);"string"==typeof a&&(a=[[t.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(8)(a,i);a.locals&&(t.exports=a.locals)},404:function(t,e,n){(t.exports=n(7)(!1)).push([t.i,'.theme--light.v-badge .v-badge__badge::after {\n  border-color: #FFFFFF;\n}\n\n.theme--dark.v-badge .v-badge__badge::after {\n  border-color: #1E1E1E;\n}\n\n.v-badge {\n  display: inline-block;\n  line-height: 1;\n  position: relative;\n}\n.v-badge__badge {\n  border-radius: 10px;\n  color: #FFFFFF;\n  display: inline-block;\n  font-size: 12px;\n  height: 20px;\n  letter-spacing: 0;\n  line-height: 1;\n  min-width: 20px;\n  padding: 4px 6px;\n  pointer-events: auto;\n  position: absolute;\n  text-align: center;\n  text-indent: 0;\n  top: auto;\n  transition: 0.3s cubic-bezier(0.25, 0.8, 0.5, 1);\n  white-space: nowrap;\n}\n.v-application--is-ltr .v-badge__badge {\n  right: auto;\n}\n.v-application--is-rtl .v-badge__badge {\n  left: auto;\n}\n.v-badge__badge .v-icon {\n  color: inherit;\n  font-size: 12px;\n  margin: 0 -2px;\n}\n.v-badge__badge .v-img {\n  height: 12px;\n  width: 12px;\n}\n.v-badge__wrapper {\n  flex: 0 1;\n  height: 100%;\n  left: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  width: 100%;\n}\n.v-badge--avatar .v-badge__badge {\n  padding: 0;\n}\n.v-badge--avatar .v-badge__badge .v-avatar {\n  height: 20px !important;\n  min-width: 0 !important;\n  max-width: 20px !important;\n}\n.v-badge--bordered .v-badge__badge::after {\n  border-radius: inherit;\n  border-width: 2px;\n  border-style: solid;\n  bottom: 0;\n  content: "";\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  transform: scale(1.15);\n}\n.v-badge--dot .v-badge__badge {\n  border-radius: 4.5px;\n  height: 9px;\n  min-width: 0;\n  padding: 0;\n  width: 9px;\n}\n.v-badge--dot .v-badge__badge::after {\n  border-width: 1.5px;\n}\n.v-badge--icon .v-badge__badge {\n  padding: 4px 6px;\n}\n.v-badge--inline {\n  align-items: center;\n  display: inline-flex;\n  justify-content: center;\n}\n.v-badge--inline .v-badge__badge,\n.v-badge--inline .v-badge__wrapper {\n  position: relative;\n}\n.v-badge--inline .v-badge__wrapper {\n  margin: 0 4px;\n}\n.v-badge--tile .v-badge__badge {\n  border-radius: 0;\n}',""])},599:function(t,e,n){"use strict";n(126);var a=n(4),i=n.n(a),s=n(22),r=n(0);const o=["sm","md","lg","xl"],l=["start","end","center"];function u(t,e){return o.reduce((n,a)=>(n[t+Object(r.G)(a)]=e(),n),{})}const d=t=>[...l,"baseline","stretch"].includes(t),c=u("align",()=>({type:String,default:null,validator:d})),h=t=>[...l,"space-between","space-around"].includes(t),f=u("justify",()=>({type:String,default:null,validator:h})),v=t=>[...l,"space-between","space-around","stretch"].includes(t),p=u("alignContent",()=>({type:String,default:null,validator:v})),g={align:Object.keys(c),justify:Object.keys(f),alignContent:Object.keys(p)},b={align:"align",justify:"justify",alignContent:"align-content"};function m(t,e,n){let a=b[t];if(null!=n){if(e){a+="-"+e.replace(t,"")}return a+="-"+n,a.toLowerCase()}}const _=new Map;e.a=i.a.extend({name:"v-row",functional:!0,props:{tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:d},...c,justify:{type:String,default:null,validator:h},...f,alignContent:{type:String,default:null,validator:v},...p},render(t,{props:e,data:n,children:a}){let i="";for(const t in e)i+=String(e[t]);let r=_.get(i);if(!r){let t;for(t in r=[],g)g[t].forEach(n=>{const a=e[n],i=m(t,n,a);i&&r.push(i)});r.push({"no-gutters":e.noGutters,"row--dense":e.dense,["align-"+e.align]:e.align,["justify-"+e.justify]:e.justify,["align-content-"+e.alignContent]:e.alignContent}),_.set(i,r)}return t(e.tag,Object(s.a)(n,{staticClass:"row",class:r}),a)}})},95:function(t,e,n){var a=n(357);"string"==typeof a&&(a=[[t.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(8)(a,i);a.locals&&(t.exports=a.locals)}}]);