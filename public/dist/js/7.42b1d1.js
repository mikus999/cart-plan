(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{100:function(t,e,a){var n=a(406);"string"==typeof n&&(n=[[t.i,n,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a(8)(n,s);n.locals&&(t.exports=n.locals)},405:function(t,e,a){"use strict";var n=a(100);a.n(n).a},406:function(t,e,a){(t.exports=a(7)(!1)).push([t.i,"\n.tab-links a[data-v-35a806ff] {\n  text-decoration: none;\n}\n",""])},65:function(t,e,a){"use strict";a.r(e);var n=a(1),s=a.n(n),r=a(6),i=a.n(r);function o(t,e,a,n,s,r,i){try{var o=t[r](i),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(n,s)}function c(t){return function(){var e=this,a=arguments;return new Promise((function(n,s){var r=t.apply(e,a);function i(t){o(r,n,s,i,c,"next",t)}function c(t){o(r,n,s,i,c,"throw",t)}i(void 0)}))}}var u={middleware:["auth","teams"],layout:"vuetify",mixins:[a(17).a],data:function(){return{dialog:!1,hasError:!1,tab:null,teamData:[],validation:{name:{success:!1,message:null}},userHeaders:[{text:this.$t("general.name"),align:"start",value:"name"},{text:this.$t("general.email"),value:"email"},{text:this.$t("account.user_code"),value:"user_code"},{text:this.$t("account.account_created"),value:"created_at"},{text:this.$t("general.actions"),value:"actions",sortable:!1}],settings:{shifts:{switches:[{column:"setting_shift_request_autoapproval",text:this.$t("teams.setting_shift_request_autoapproval")},{column:"setting_shift_trade_autoapproval",text:this.$t("teams.setting_shift_trade_autoapproval")},{column:"setting_shift_assignment_autoaccept",text:this.$t("teams.setting_shift_assignment_autoaccept")}],numbers:[{column:"default_participants_min",text:this.$t("teams.setting_default_participants_min"),step:1},{column:"default_participants_max",text:this.$t("teams.setting_default_participants_max"),step:1},{column:"default_shift_minutes",text:this.$t("teams.setting_default_shift_minutes"),step:30}]}},userData:[],newUserCode:""}},computed:{},watch:{dialog:function(t){t||this.close()}},created:function(){this.getTeamData(),this.getUserData()},methods:{getUserData:function(){var t=this;return c(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/api/teams/users/"+t.team.id).then((function(e){t.userData=e.data}));case 2:case"end":return e.stop()}}),e)})))()},getTeamData:function(){var t=this;i.a.get("/api/teams/"+this.team.id).then((function(e){t.teamData=e.data}))},updateTeam:_.debounce(function(){var t=c(s.a.mark((function t(e){var a=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.validation[e.target.name].success=!0,setTimeout((function(){return a.validation[e.target.name].success=!1}),3e3),t.next=4,i()({method:"patch",url:"/api/teams/"+this.team.id,data:{name:this.teamData.display_name,user_id:this.teamData.user_id}});case 4:this.getTeams();case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),1e3),deleteTeam:function(){var t=this;return c(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$root.$confirm(t.$t("teams.confirm_delete_text"),null,"error");case 2:if(!e.sent){e.next=5;break}return e.next=5,i.a.delete("/api/teams/"+t.team.id).then((function(e){t.getTeams(),0==t.teams.length?t.$router.push({name:"teams.join"}):(t.setTeam(t.teams[0].id),t.$router.push("/home"))}));case 5:case"end":return e.stop()}}),e)})))()},resetCode:function(){var t=this;return c(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("/api/teams/resetcode/"+t.team.id).then((function(e){t.teamData=e.data}));case 2:case"end":return e.stop()}}),e)})))()},deleteUser:function(t){var e=this;return c(s.a.mark((function a(){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$root.$confirm(e.$t("teams.confirm_remove_user"),null,"error");case 2:if(!a.sent){a.next=5;break}return a.next=5,i()({method:"post",url:"/api/teams/leaveteam",data:{team_id:e.team.id,user_id:t.id}}).then((function(t){e.getUserData(),e.showSnackbar(e.$t("teams.success_remove_user"),"success")}));case 5:case"end":return a.stop()}}),a)})))()},close:function(){this.dialog=!1},addUser:function(){var t=this;return c(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i()({method:"post",url:"/api/teams/jointeam",data:{team_id:t.team.id,user_code:t.newUserCode}}).then((function(e){e.data.error?t.showSnackbar(t.$t(e.data.message,"error")):(t.getUserData(),t.showSnackbar(t.$t("teams.success_add_user"),"success"))}));case 2:t.newUserCode="",t.close();case 4:case"end":return e.stop()}}),e)})))()},changeSetting:function(t,e){var a=this;return c(s.a.mark((function n(){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r="",r="bool"===e?null===a.teamData[t]?0:1:a.teamData[t],n.next=4,i()({method:"post",url:"/api/teams/settings/update",data:{team_id:a.team.id,setting:t,value:r}}).then((function(t){a.$store.dispatch("auth/setTeam",t.data)}));case 4:case"end":return n.stop()}}),n)})))()}}},l=(a(405),a(5)),m=a(13),d=a.n(m),v=a(87),p=a(157),f=a(10),h=a(155),b=a(598),g=a(630),x=a(612),w=a(629),k=a(150),$=a(75),y=a(159),D=a(153),C=a(599),V=a(626),T=a(154),U=a(627),S=a(607),A=a(616),I=a(614),N=a(169),j=a(68),H=a(37),P=a(24),q=Object(l.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("PageTitle",{attrs:{title:t.$t("teams.team_settings")}})],1),t._v(" "),a("v-card",{attrs:{width:"100%"}},[a("v-tabs",{staticClass:"tab-links mt-10",attrs:{"icons-and-text":"",grow:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab",{attrs:{href:"#tab-general"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.smAndUp,expression:"$vuetify.breakpoint.smAndUp"}]},[t._v(t._s(t.$t("general.general")))]),t._v(" "),a("v-icon",[t._v("mdi-information")])],1),t._v(" "),a("v-tab",{attrs:{href:"#tab-settings"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.smAndUp,expression:"$vuetify.breakpoint.smAndUp"}]},[t._v(t._s(t.$t("general.settings")))]),t._v(" "),a("v-icon",[t._v("mdi-cog")])],1),t._v(" "),a("v-tab",{attrs:{href:"#tab-users"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.smAndUp,expression:"$vuetify.breakpoint.smAndUp"}]},[t._v(t._s(t.$t("general.users")))]),t._v(" "),a("v-icon",[t._v("mdi-account-multiple")])],1),t._v(" "),a("v-tabs-items",{staticClass:"pt-10",model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",{attrs:{value:"tab-general"}},[a("v-col",{attrs:{md:"6"}},[a("v-text-field",{attrs:{name:"display_name",label:t.$t("teams.team_name"),success:t.validation.name.success},nativeOn:{input:function(e){return t.updateTeam(e)}},scopedSlots:t._u([t.validation.name.success?{key:"append",fn:function(){return[a("v-icon",{attrs:{color:"green"}},[t._v("mdi-check-circle")])]},proxy:!0}:null],null,!0),model:{value:t.teamData.display_name,callback:function(e){t.$set(t.teamData,"display_name",e)},expression:"teamData.display_name"}}),t._v(" "),a("v-text-field",{attrs:{name:"code",label:t.$t("teams.team_code"),value:t.teamData.code,readonly:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("v-icon",{attrs:{color:"error"},on:{click:t.resetCode}},[t._v("mdi-lock-reset")])]},proxy:!0}])}),t._v(" "),a("v-text-field",{attrs:{name:"team_date",label:t.$t("teams.date_created"),value:t._f("formatDate")(t.teamData.created_at),readonly:""}}),t._v(" "),a("v-btn",{attrs:{color:"error"},on:{click:function(e){return e.preventDefault(),t.deleteTeam(e)}}},[t._v("\n              "+t._s(t.$t("teams.delete_team"))+"\n            ")])],1)],1),t._v(" "),a("v-tab-item",{attrs:{value:"tab-settings"}},[a("v-col",{attrs:{cols:"12"}},[a("v-subheader",{staticClass:"text-subtitle-1 text-uppercase"},[t._v(t._s(t.$t("schedules.shifts")))]),t._v(" "),a("v-divider"),t._v(" "),t._l(t.settings.shifts.switches,(function(e){return a("v-switch",{key:e.index,staticClass:"pl-5",attrs:{value:t.teamData[e.column],label:e.text},on:{change:function(a){return t.changeSetting(e.column,"bool")}},model:{value:t.teamData[e.column],callback:function(a){t.$set(t.teamData,e.column,a)},expression:"teamData[sw.column]"}})})),t._v(" "),t._l(t.settings.shifts.numbers,(function(e){return a("div",{key:e.index,staticClass:"mt-8 mb-8"},[a("v-input",{staticClass:"ml-5"},[a("v-chip",{staticClass:"mr-3",attrs:{color:"primary"}},[a("v-icon",{attrs:{small:"",left:""},on:{click:function(a){t.teamData[e.column]-=e.step,t.changeSetting(e.column,"num")}}},[t._v("mdi-minus")]),t._v(" "),a("span",{staticClass:"pa-1"},[t._v(t._s(t.formatHoursMinutes(t.teamData[e.column])))]),t._v(" "),a("v-icon",{attrs:{small:"",right:""},on:{click:function(a){t.teamData[e.column]+=e.step,t.changeSetting(e.column,"num")}}},[t._v("mdi-plus")])],1),t._v(" "),a("v-label",{staticClass:"float-right"},[t._v(t._s(e.text))])],1)],1)}))],2)],1),t._v(" "),a("v-tab-item",{attrs:{value:"tab-users"}},[a("v-data-table",{attrs:{headers:t.userHeaders,items:t.userData},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",{directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.smAndUp,expression:"$vuetify.breakpoint.smAndUp"}]},[t._v(t._s(t.$t("general.users")))]),t._v(" "),a("v-spacer"),t._v(" "),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"secondary",block:t.$vuetify.breakpoint.xs}},"v-btn",s,!1),n),[t._v(t._s(t.$t("teams.add_user")))])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.$t("teams.add_user_to_team")))])]),t._v(" "),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:t.$t("account.user_code")},model:{value:t.newUserCode,callback:function(e){t.newUserCode=e},expression:"newUserCode"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(t._s(t.$t("general.cancel")))]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.addUser}},[t._v(t._s(t.$t("general.save")))])],1)],1)],1)],1)]},proxy:!0},{key:"item.created_at",fn:function(e){var a=e.item;return[t._v("\n              "+t._s(t._f("formatDate")(a.created_at))+"\n            ")]}},{key:"item.actions",fn:function(e){var n=e.item;return[a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteUser(n)}}},[t._v("\n                mdi-delete\n              ")])]}}])})],1)],1)],1)],1)],1)}),[],!1,null,"35a806ff",null);e.default=q.exports;d()(q,{VBtn:v.a,VCard:p.a,VCardActions:f.a,VCardText:f.c,VCardTitle:f.d,VChip:h.a,VCol:b.a,VContainer:g.a,VDataTable:x.a,VDialog:w.a,VDivider:k.a,VIcon:$.a,VInput:y.a,VLabel:D.a,VRow:C.a,VSpacer:V.a,VSubheader:T.a,VSwitch:U.a,VTab:S.a,VTabItem:A.a,VTabs:I.a,VTabsItems:N.a,VTextField:j.a,VToolbar:H.a,VToolbarTitle:P.a})}}]);